<html>
<head>
    <meta charset="utf-8" />
    <title>Simberg 5th Lab</title>
    <script type='text/javascript' src="https://www.x3dom.org/download/dev/x3dom-full.js"> </script>
    <link rel='stylesheet' type='text/css' href='https://www.x3dom.org/download/x3dom.css'/>
    <script>
    function move(point) 
    {
       document.getElementById('carCh').setAttribute('set_destination', point[0]+' '+parseFloat(point[1]+0.8)+' '+point[2]); 
    }
     function randomcolor()
     {
     var clr = document.getElementById('myMat');
    clr.setAttribute("diffusecolor", " " + Math.random() + " " + Math.random() + " " + Math.random());
    }      
    </script>
</head>

<body>
<p>
   Simberg Dmitry. Group 4643
</p>
<x3d width='1280px' height='720px'>
    <scene >
      <navigationInfo type='"any"' id="navType" speed='3.5'></navigationInfo>

        <PointLight location="5 5 -2" color="1 1 1" intensity="0.5" shadowIntensity="0.5" shadowMapSize="1024"></PointLight>
        

      <Background backUrl="https://pp.userapi.com/c852136/v852136764/c776d/2wgJ_XSx5RM.jpg" 
                  bottomUrl="https://pp.userapi.com/c852136/v852136764/c7782/mmuvLMgu0kY.jpg" 
                  frontUrl="https://pp.userapi.com/c852136/v852136764/c7789/Ml4pktBzVTo.jpg" 
                  leftUrl="https://pp.userapi.com/c852136/v852136764/c7774/nRRuuWwgri0.jpg" 
                  rightUrl="https://pp.userapi.com/c852136/v852136764/c7766/fQhYTFYmYFA.jpg" 
                  topUrl="https://pp.userapi.com/c852136/v852136764/c777b/BGF02N0jJDQ.jpg">
      </Background>

      <PositionChaser id='carCh' duration='1' ></PositionChaser>

         <transform translation='0 -0.88 0 ' onclick="move(event.hitPnt);">
          <shape>
            <appearance>
              <Imagetexture url="https://pp.userapi.com/c852136/v852136764/c7782/mmuvLMgu0kY.jpg"></Imagetexture>
            </appearance>
            <box size='40 0.2 40'></box>
          </shape>
         </transform>

        <transform DEF='car' onclick='select("carCh")' >   <!---car body--->
        <shape>
            <appearance>
                <material DEF='CarColor' id='myMat' diffuseColor='0.37 0 0'></material>
            </appearance>
            <box size = '3 1.1 7'></box>
        </shape>

           <group DEF='wheel'>
            <transform translation='1.4 -0.2 2.4' rotation='0 0 1 1.57'><!---front left wheel--->
                <shape >
                    <appearance>
                        <material diffuseColor='#000000'></material>
                    </appearance>
                    <cylinder height='0.4' radius='0.6'></cylinder>
                </shape>
                <transform>
                    <shape >
                    <appearance>
                        <material diffuseColor='#707070'></material>
                    </appearance>
                    <cylinder height='0.41' radius='0.45'></cylinder>
                </shape>
                </transform>            
              </transform>
             </group>

             <transform translation='-2.8 0 0'>           <!---front right wheel--->
              <shape USE='wheel'></shape>
            </transform>

            <transform translation='0 0 -4.9'>            <!---rear left wheel--->
              <shape USE='wheel'></shape>
            </transform>

            <transform translation='-2.8 0 -4.9'>         <!---rear right wheel--->
              <shape USE='wheel'></shape>
            </transform>


           

             <transform translation='0 0.95 -0.7'>                 <!---roof--->
                <shape>
                    <appearance>
                        <material USE='CarColor'></material>
                    </appearance>
                    <box size='2.85 0.9 2.01'></box>
                </shape> 

                <transform translation=' 0 -0.15 -0.01'>            <!---sidewindows--->
                    <shape>
                    <appearance>
                        <material diffuseColor='#c0f5ff'></material>
                    </appearance>
                    <box size='2.86 0.9 1.8'></box>
                </shape> 
                </transform>

                <!---thing on a hood--->

                <transform translation='0 -0.37 4.1'>
                    <shape>
                        <appearance>
                            <material USE='CarColor'></material>
                        </appearance>
                        <cone bottomRadius='0.05' height='0.07' topRadius='0.01' ></cone>
                    </shape>

                    <transform translation='0 0.03 0'>
                      <anchor url='https://www.youtube.com/watch?v=dQw4w9WgXcQ' parameter="target='_self'">
                        <shape>
                            <appearance>
                                <material diffuseColor='#000060'></material>
                            </appearance>
                            <sphere radius='0.03'></sphere>
                        </shape>
                      </anchor>
                    </transform>
                </transform>

                <!---windshield--->

                <transform translation='0 -0.41 1.45' rotation='1 0 0 0.61'>    
                    <shape>
                     <appearance>
                        <material USE='CarColor'></material>
                    </appearance>
                    <box size='2.85 0.9 1.71'></box>
                </shape>
                </transform>   

                <transform translation='0 -0.4 1.45' rotation='1 0 0 0.61'>    <!---window--->
                    <shape>
                     <appearance>
                        <material diffuseColor='#c0f5ff'></material>
                    </appearance>
                    <box size='2.65 0.9 1.5'></box>
                </shape>
                </transform> 

                 <transform translation='0 -0.5 1.25' rotation='1 0 0 0.61'>    <!---sidewindows--->
                    <shape>
                     <appearance>
                        <material diffuseColor='#c0f5ff'></material>
                    </appearance>
                    <box size='2.86 0.9 1.5'></box>
                </shape>
                </transform>

                <!---rear window--->

                 <transform translation='0 -0.45 -1.37' rotation='1 0 0 -0.7'>  
                    <shape>
                     <appearance>
                        <material USE='CarColor'></material>
                    </appearance>
                    <box size='2.85 0.9 1.71'></box>
                </shape>
                </transform>   

                <transform translation='0 -0.45 -1.38' rotation='1 0 0 -0.7'>  <!---window--->
                    <shape>
                     <appearance>
                        <material diffuseColor='#c0f5ff'></material>
                    </appearance>
                    <box size='2.65 0.9 1.5'></box>
                </shape>
                </transform> 

                <transform translation='0 -0.52 -1.2' rotation='1 0 0 -0.7'>  <!---sidewindows--->
                    <shape>
                     <appearance>
                        <material diffuseColor='#c0f5ff'></material>
                    </appearance>
                    <box size='2.86 0.9 1.5'></box>
                </shape>
                </transform> 

             </transform>

             <!---mirrors--->

             <transform translation='0 0.59 1.15'>
                <shape>
                    <appearance>
                        <material USE='CarColor'></material>
                    </appearance>
                    <box size='3.55 0.2 0.2'></box>
                </shape>
             </transform>

             <!---headlights--->

             <transform translation ='1 0.25 3.5'>              <!---_left--->
                 <shape>
                     <appearance>
                         <material diffuseColor='#f3ff20' emissiveColor='#ffff90'></material>
                     </appearance>
                     <box size='0.6 0.3 0.1'></box>>
                 </shape>
             </transform>
             <transform translation ='-1 0.25 3.5'>             <!---_right--->
                 <shape>
                     <appearance>
                         <material diffuseColor='#f3ff20' emissiveColor='#ffff90'></material>
                     </appearance>
                     <box size='0.6 0.3 0.1'></box>
                 </shape>
             </transform>

             <!---_grill--->

             <transform translation ='0 0.22 3.5'>             
                 <shape>
                     <appearance>
                         <material diffuseColor='#505050' ></material>
                     </appearance>
                     <box size='1.3 0.4 0.1'></box>
                 </shape>
                 
             </transform>

             <!---stoplights--->

                <transform translation ='1 0.25 -3.5'>              <!---_left--->
                 <shape>
                     <appearance>
                         <material diffuseColor='#e81700'></material>
                     </appearance>
                     <box size='0.6 0.3 0.1'></box>>
                 </shape>
             </transform>
             <transform translation ='-1 0.25 -3.5'>                <!---_right--->
                 <shape>
                     <appearance>
                         <material diffuseColor='#e81700'></material>
                     </appearance>
                     <box size='0.6 0.3 0.1'></box>
                 </shape>
             </transform>

             <!--bumpers--->

            <transform translation='0 -0.3 3.4'>          <!---front--->
                <shape>
                    <appearance>
                        <material diffuseColor='#303030'></material>
                    </appearance>
                    <box size='3.2 0.3 0.5'></box>
                </shape>
            </transform>

             <transform translation='0 -0.3 -3.4'>          <!---rear--->
                <shape>
                    <appearance>
                        <material diffuseColor='#303030'></material>
                    </appearance>
                    <box size='3.2 0.3 0.5'></box>
                </shape>
            </transform>
        </transform>

        <ROUTE fromNode='carCh' fromField='value_changed'
               toNode='car' toField='set_translation'>
        </ROUTE>

    </scene>
</x3d>
<input type="button" id="bt1" value="Поменять цвет" onClick='randomcolor()'>
</body>
</html>